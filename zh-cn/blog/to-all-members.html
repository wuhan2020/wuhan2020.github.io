<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="keywords" content="Wuhan2020,一封信" />
  <meta name="description" content="致 WUHAN 2020 开源社区全体成员的一封信" />
  <meta name="baidu-site-verification" content="FQ6eOEi529" />
  <meta name="google-site-verification" content="MAGtB2GHGYz6jBJi37SzGuOeIaKWw0QolEgWWQ6uChI" />

  <!-- 网页标签标题 -->
  <title>致 WUHAN 2020 开源社区全体成员的一封信</title>
  <link rel="shortcut icon" href="/images/wuhan2020-mini.png" />
  <link rel="stylesheet" href="/build/blogDetail.css" />
  <style>
    .gray-page {
      -moz-filter: grayscale(100%) !important;
      -webkit-filter: grayscale(100%) !important;
      filter: gray !important; /* IE6-9 */
      filter: grayscale(100%) !important;
    }
  </style>
</head>

<body>
  <div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-zh-cn header-container-normal"><div class="header-body"><a href="/zh-cn/index.html"><img class="logo" src="/images/wuhan2020-logo.png"/></a><div class="ant-select-sm lang-select ant-select ant-select-enabled"><div class="ant-select-selection
            ant-select-selection--single" role="combobox" aria-autocomplete="list" aria-haspopup="true" aria-controls="" aria-expanded="false" tabindex="0"><div class="ant-select-selection__rendered"><div class="ant-select-selection-selected-value" title="简体中文" style="display:block;opacity:1">简体中文</div></div><span class="ant-select-arrow" style="user-select:none;-webkit-user-select:none" unselectable="on"><i aria-label="icon: down" class="anticon anticon-down ant-select-arrow-icon"><svg viewBox="64 64 896 896" focusable="false" class="" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></i></span></div></div><div class="header-menu"><img class="header-menu-toggle" src="/images/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/docs/overview/what-is-wuhan2020.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/docs/developers/developers_dev.html" target="_self">贡献者</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/zh-cn/blog/index.html" target="_self">博客</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/community/index.html" target="_self">社区</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/project/index.html" target="_self">项目列表</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/hackathon/index.html" target="_self">黑客松</a></li><li class="menu-item menu-item-normal"><a href="/zh-cn/docs/experiences/overview.html" target="_self">抗疫经验</a></li><li class="menu-item menu-item-normal"><a href="https://wh.opensource-service.cn/" target="_self">新型冠状病毒防疫信息平台</a></li></ul></div></div></header><section class="blog-content markdown-body"><h1>致 WUHAN 2020 开源社区全体成员的一封信</h1>
<p>各位wuhan2020 开源社区成员：</p>
<p>2020年1月25日，春节，在这个特殊的日子，我们正式发起了《<a href="http://mp.weixin.qq.com/s?__biz=MzA5MTc0MzEzNQ==&amp;mid=2672493489&amp;idx=1&amp;sn=5e416af1ca475b2b4efdbdc1ee0162ba&amp;chksm=8ac81541bdbf9c571831d05340bdf2bbe125917f143b4176d3de5000c51574cb7827ad192bf3&amp;scene=21#wechat_redirect">wuhan2020</a><a href="http://mp.weixin.qq.com/s?__biz=MzA5MTc0MzEzNQ==&amp;mid=2672493489&amp;idx=1&amp;sn=5e416af1ca475b2b4efdbdc1ee0162ba&amp;chksm=8ac81541bdbf9c571831d05340bdf2bbe125917f143b4176d3de5000c51574cb7827ad192bf3&amp;scene=21#wechat_redirect">：武汉新型冠状病毒防疫开源信息收集平台</a>》的开源项目，用开发者们的方式支援这场没有硝烟的战争。截至2020年1月28日21时，全国共有4630个确诊病例、73个治愈病例、以及106个死亡病例，海外60个确诊病例，形势异常严峻。</p>
<h2>缘起</h2>
<p>项目之初，我们看到的是，面对突如其来的新型冠状病毒疫情，武汉及周边各市县均爆出物资供给不足的情况，而重大公共卫生事件在公共社会事件中属于较复杂的类型，统筹安排难度大，周期长。而且，目前信息采集与公布平台不一致，信息散乱很难进行有效沟通，大量图片信息不利于实时沟通。</p>
<p>作为开发者群体，我们思考的是能否利用数字平台优势，让各供需方进行分布式自助对接可大幅提升效率。故发起该项目，旨在统一收集本次事件中相关事务处理方的信息，并利用开源和分布式协作优势实时更新并通报，提供各方的联系平台。这里，供需数字化和信息的透明快速扭转是我们认为的关键所在。</p>
<p>事实上已有相似的石墨文档项目发起，保持在 50 人左右的协同编辑热度，但石墨文档编辑的方式，很难保证格式一致性，需要有专人实时对内容格式进行编辑，各种标注较为混乱，而且对于后期加入程序可视化与交互能力并不友好。正好我们又是一群开源爱好者，故直接在GitHub 上发起了该项目，望众程序员可以齐心协力，共克时艰。</p>
<h2>项目功能</h2>
<p>旨在统一收集本次事件中相关事务处理方的信息，并利用开源和分布式协作优势进行实时更新并通报，提供各方联系的综合平台，其核心是通过公开众包的形式进行采集数据，同样通过众包审核后，将带有数据来源的信息合并到代码仓库中，并形成一套完整的流程机制。</p>
<p>在项目初期，其实我们并没有仔细思考整个平台的功能，特别是从产品的角度，这也受限于团队本身。我们首先制定了几件容易想到的事情，包括：</p>
<ul>
<li>
<p>存储格式：标准的csv文件</p>
</li>
<li>
<p>信息主体：医院信息、酒店信息、物流信息、生产信息、捐赠信息、捐款信息、预防治疗手段、新闻内容等</p>
</li>
<li>
<p>信息实时录入功能</p>
</li>
<li>
<p>部分可视化与信息查询界面</p>
</li>
<li>
<p>外部数据汇集：微博、头条、搜索引擎信息等</p>
</li>
</ul>
<p>在项目开始实施后，我们开始遇到了一些问题，同时也总结了部分经验，具体如下。</p>
<h2>遇到的挑战</h2>
<ul>
<li>
<p>工作量大，累成狗，很多信息需要挨个打电话落实</p>
</li>
<li>
<p>网上流传的有些信息被篡改，不知道群里的数据本身是不是被篡改</p>
</li>
<li>
<p>我验证的信息，别的小分队、组织也在验证，重复劳动</p>
</li>
<li>
<p>甚至有个硬要求：只把官方发布的数据算进去</p>
</li>
<li>
<p>医院内部的信息可能数据贡献者跟发布者没有同步</p>
</li>
<li>
<p>数据的时效性无法保障</p>
</li>
<li>
<p>如何避免跟其他群或者组织重复验真</p>
</li>
<li>
<p>如何将其他组织的数据变成可信任的数据源</p>
</li>
<li>
<p>信息收集渠道不统一，多种工具同时在用</p>
</li>
</ul>
<h2>总结的经验</h2>
<ul>
<li>
<p>流程、流程、流程：流程是规范大家行为，保证每个人的行动一致、结果的偏差小</p>
</li>
<li>
<p>数据输入和验证漏斗：搜集—验真—录入—发布</p>
</li>
<li>
<p>与公开信息交叉验证</p>
</li>
<li>
<p>医院汇总人员直接录入，可信程度最高，同时带上录入员信息</p>
</li>
</ul>
<h2>重新顶层设计</h2>
<p>基于上述挑战和经验，我们重新进行了顶层设计，并把中心放在标准的流程和标准的录入规范上面，同时继续用石墨工具进行统一信息采集。这里要重点提一下石墨团队，直接拉了主力开发人员协助我们进行数据接口的对接。探索中，我们逐步形成了如下的协作流程：</p>
<p><img src="/images/coordinate-flow.webp" alt=""></p>
<center>持续更新，以Github上的为准</center>
<p>目前我们设计的 <font color='#FF0000'>《信息协作流程规范》</font> 中，信息流程如下：</p>
<p><font color='#FF0000'> 石墨表格 --&gt; Git 数据仓库 --&gt; 前端展示 </font></p>
<p>其中，<font color='#FF0000'>石墨流程包括：</font></p>
<ul>
<li>
<p>任何人可以填写申请表单，获得某类信息的录入权限</p>
</li>
<li>
<p>信息录入有格式要求，通过石墨公式进行强校验</p>
</li>
<li>
<p>录入信息需要有源链接，提供有效的数据校验能力</p>
</li>
<li>
<p>审核人有严格的制度，审核人信息实名落地，保证不会有恶意审核</p>
</li>
<li>
<p>石墨文档中，申请并通过的账号有录入权限，但表头与审核状态列只有审核人可以编辑</p>
</li>
<li>
<p>审核人在审核确定某条记录真实后，会锁定该行，不能再进行编辑</p>
</li>
<li>
<p>对于数据重复校验，使用石墨的重复数据自动高亮功能提示，并提供脚本的定时检查能力</p>
</li>
</ul>
<p><font color='#FF0000'>数据落仓包括：</font></p>
<ul>
<li>
<p>石墨数据可以自动化落入Git 数据仓库</p>
</li>
<li>
<p>通过配置方式决定哪些文档数据可以落仓</p>
</li>
<li>
<p>落仓时仅落入已经审核通过的数据，未通过数据不予落仓</p>
</li>
<li>
<p>落仓无需二次校验，直接推入数据仓库</p>
</li>
<li>
<p>落仓由程序自动化进行，保证数据实时性不会高于 15 分钟的误差</p>
</li>
<li>
<p>落仓时会进行额外的数据预处理，方便后续处理</p>
</li>
<li>
<p>对于特定行，例如特定医院记录，邀请联系人成为该行数据编辑人，仅能编辑本医院条目，其他类别类似</p>
</li>
</ul>
<p><font color='#FF0000'>数据展示包括：</font></p>
<ul>
<li>
<p>数据仓库包含各种数据类型的实时数据</p>
</li>
<li>
<p>任何开发者可自行开发可视化展示、检索、分析程序，直接使用线上数仓数据</p>
</li>
</ul>
<p>通过以上流程，<font color='#FF0000'>采取分组制，流水线作业</font>，好处是：</p>
<ul>
<li>
<p>操作行为可控，能收敛</p>
</li>
<li>
<p>严格用核心成员保证审核人的来源，保证了数据录入有效性，所有数据必须经过实名审核员审核</p>
</li>
<li>
<p>保证自动化程度，保证后期的大规模水平扩展能力，除数据审核外全流程数据落地全部自动化，无需人工介入</p>
</li>
<li>
<p>保证数据有效性，数据审核后锁定，除数据源负责人，无人可进行修改</p>
</li>
<li>
<p>保证数据时效性：该条需要该平台首先成为唯一数据源平台，则数据源负责人在需求变动时仅需修改表单对应行即可</p>
</li>
<li>
<p>数据是实时变化的，而且由于使用的是Git 数仓，其实我们可以拿到所有的历史变化记录，便于数据分析工作</p>
</li>
</ul>
<p>基于上述思想，我们形成了<font color='#FF0000'>《信息收集录入流程规范》</font>，录入组必须遵循这样的规范才能录入信息；同样，我们也形成了<font color='#FF0000'>《信息审核流程规范》</font>，审核员也必须按照该规范才能进行数据落仓。</p>
<p>我们希望通过自动化手段来聚集数据，当其成长为主要平台时，各数据源自然会来我们这里发布和修改数据，而我们的&lt;<font color='#FF0000'>四层权限体系</font>也保证了数据的真实有效。当然最重要的<font color='#FF0000'>全流程的自动化</font>，以保证在&lt;<font color='#FF0000'>水平扩展</font>时不会导致人力成本爆炸。我们技术团队的主体来自高校的老师和学生，集中在计算机专业和数据分析专业，<font color='#FF0000'>全流程管理和自动化一开始就都在考虑之列的</font>。</p>
<p>我们的初衷是<font color='#FF0000'>帮助整合信息，让大家能够快速获取有效实时的数据和信息</font>，这个初心是不变的。我们同时也还有自己的学业和事情，也不是非要做成一个重要的项目，如果有别人做的比我们好，自然是应该学习的，但如果我们觉得我们的方式更好，那我们就应该坚持做下去再看结果，这就是开源的核心所在。</p>
<p>长远看，我们的项目可以快速发展，对接<font color='#FF0000'>任意数据源、任意数仓、任意数据格式</font>，三个解耦，使得其有很好的扩展能力。最理想的情况是，官方直接用我们的数据平台进行数据录入，即保证了高效性，也保证了数据的真实性。当然，这需要我们共同来努力，使其成为一个最有影响力的平台，直接的信息源实名录入，是我们最想看到的结果。</p>
<p>基于上述思想，项目目前的<font color='#FF0000'>形态架构</font>大致是下面这个样子（并不严谨版）：</p>
<p><img src="/images/wuhan2020-architect.webp" alt=""></p>
<center>持续更新，以Github上的为准</center>
<p>中间的三个规范是我们最重要的核心，也是希望能够持续迭代成为全网标准，目前共包括三个规范：<font color='#FF0000'>《信息协作流程规范》</font>、<font color='#FF0000'>《信息收集录入流程规范》</font>、以及<font color='#FF0000'>《信息审核流程规范》</font>，相信随着项目的不断推进，还会有更多更加细致的规范出来。</p>
<p>最下面一层是我们整个开源社区目前正在使用的基础设施。其中<font color='#FF0000'> <strong>GitHub</strong> 和码云</font>用来做开发协作与数据落地，出于数据安全的考虑，最终的数据落地会是在码云平台上，协作流程目前还是在GitHub上的原因是GitHub的协作生态要好太多（懂的人自然懂），特别是集成了我们自己的协作机器人 <font color='#FF0000'><strong>Hypertrons</strong></font> 。当然，后续也不排除某个合适的时间，我们也同时支持码云平台的协作。 <font color='#FF0000'><strong>Slack</strong></font> 是我们开发者日常交流通信的工具，即ChatOps，为什么不用微信，同样也是懂的人自然懂，类似Slack这样的工具对于开发者来说太重要，大家可以多尝试。</p>
<p>而对于非技术人员来说（信息采集、审核、宣传、协调等），则主要是通过<font color='#FF0000'>石墨文档</font>来进行信息采集与审核，通过<font color='#FF0000'>微信</font>来进行日常的沟通交流。也正是因为此，我们逐渐形成了多个小分队，并实行组长责任制。</p>
<p>最上层是基于本项目落地的数据平台的各种应用，包括数据门户、数据可视化、数据同步等，相信随着项目的推进，还会有更多有意思的应用出现。</p>
<p><img src="/images/wuhan2020-demo-page.webp" alt=""></p>
<center>持续更新，以https://github.com/wuhan2020为准</center>
<h2>社区组织</h2>
<p>wuhan2020开源社区目前包括如下几个组：</p>
<ul>
<li>
<p><font color='#FF0000'>技术组</font>：项目工程技术实时团队，目前主要通过Github + Slack进行协作；</p>
</li>
<li>
<p><font color='#FF0000'>信息组</font>：目前主要负责信息的收集与录入，主要工具为石墨文档；</p>
</li>
<li>
<p><font color='#FF0000'>协调组</font>：协调几个小组之间的协同与协作。</p>
</li>
</ul>
<p>这是最开始形成的三个核心小组，到了第三天和第四天，我们又形成了三个新的小组：</p>
<ul>
<li>
<p><font color='#FF0000'>宣传组</font>：对项目进行宣传，包括品牌的建设，文案、设计等宣传资料的制作，以及渠道的拓展；</p>
</li>
<li>
<p><font color='#FF0000'>审核组</font>：根据审核规范对录入的信息的真实性进行审核；</p>
</li>
<li>
<p><font color='#FF0000'>风控组</font>：对项目整体风险进行控制，包括信息安全风险、合规性等方面。</p>
</li>
</ul>
<p>之所以增加风控组，我们认为除了数据的真实性，数据的安全性问题同样重要，合法合规同样是我们必须遵守的，也请所有正在做贡献的朋友们引起重视。因此，再次声明一下：本项目所收集的数据均是通过正规渠道通过公开众包的形式进行采集的，通过众包审核后，均附有数据来源，项目本身的核心是提供一套流程机制和规范，尽量发动志愿者、合作方、甚至是官方来进行数据采集的动作，并且坚持知情同意的原则。</p>
<p>在上面工作小组的基础之上，我们形成了<font color='#FF0000'>《 <strong>wuhan2020</strong> 入组工作攻略》</font>，这样，新来的朋友们可以更具自己的特长，选择加入的工作组进行工作，包括加入渠道，小组负责人等信息。</p>
<h2>关于开源</h2>
<p>最后再来聊聊开源的一些事情。开源首先是我们团队的专业技术爱好和一种高效工作方式的共识。而在当下这个灾难场景下又有一层特别的含义，那就是<font color='#FF0000'>数据开源</font>。我们认为，正是因为相关部门数据的不开放、流转不透明，才导致了今天这样一个困局。而数据的使用方式也应该是开源的，这就涉及到<font color='#FF0000'>软件开源</font>了，不仅是使用方式，整个软件的构建过程也同样应该开放透明，这就是<font color='#FF0000'>协作开源</font>了。短短的几天，我们已经深刻体会到这种开发模式的威力，正所谓<font color='#FF0000'>开源界一天， <strong>IT</strong> 界一年</font>。我想整个社区的开发者也会慢慢有我们类似的体会。而且会由量变带来质变，那就是<font color='#FF0000'>公平度与自由度</font>！</p>
<p>今天，得益于全人类共同的实践成果，使得我们能够以一个更加平等的方式重新组织社会、重新安排生活。这种组织与安排不仅发生在我们的现实社会中，还进一步渗透到了我们的数字空间中，并通过互联网进行了放大与加深。</p>
<p>今天的开源界，非常像当年的美洲新大陆。广大的开发者们正在共同开拓一个新的<font color='#FF0000'>开源数字生态</font>，而发源于计算机工程领域的开源正在从专业领域走向普通大众、从技术工程走向科学想象、从社区治理走向与社会科学与人文科学的结合，甚至需要进行人类学式的文化研究。</p>
<p>我们希望这个开源项目与开源社区，承载的不仅仅是这次肆虐的病毒抗争，同时还是一次<font color='#FF0000'>开源社会实验</font>，通过聚集全球的协作者，形成共识，战胜苦难，解决全人类所面临的难题。</p>
<p><strong>wuhan2020开源社区共同体</strong></p>
<p><strong>2020年1月28日</strong></p>
<h2>相关文档：</h2>
<p>《wuhan2020入组工作攻略》：</p>
<p><a href="https://shimo.im/docs/tQ8Phx3KdgkHDR8y/read">https://shimo.im/docs/tQ8Phx3KdgkHDR8y/read</a></p>
<p>《信息收集录入流程规范》：</p>
<p><a href="https://shimo.im/docs/v3xCCYVWhtHvq9w8/read">https://shimo.im/docs/v3xCCYVWhtHvq9w8/read</a></p>
<p>《信息审核流程规范》：</p>
<p><a href="https://shimo.im/docs/jRQdGwqjwdPVqJpG/read">https://shimo.im/docs/jRQdGwqjwdPVqJpG/read</a></p>
<p><img src="/images/wuhan2020-qrcode.bmp" alt=""></p>
<p>Scan with WeChat to
follow the Official Account</p>
</section><section class="blog-content"><div class="gt-container"><div class="gt-initing"><i class="gt-loader"></i><p class="gt-initing-text">Gitalking ...</p></div></div></section><footer class="footer-container"><div class="footer-body"><img src="/images/wuhan2020-logo-gray.png"/><p class="docsite-power">website powered by docsite</p><div id="google_translate_element"></div><div class="cols-container"><div class="col col-4"><h3>愿景</h3><p>众志成城，共克时艰！</p></div><div class="col col-2"><dl><dt>资源</dt><dd><a href="/zh-cn/blog/index.html" target="_self">博客</a></dd><dd><a href="/zh-cn/community/index.html" target="_self">社区</a></dd></dl></div><div class="col col-4"><dl><dt>文档</dt><dd><a href="/zh-cn/docs/overview/what-is-wuhan2020.html" target="_self">Wuhan2020 项目是干什么的？</a></dd><dd><a href="/zh-cn/docs/dev/quickstart.html" target="_self">快速开始</a></dd><dd><a href="https://github.com/wuhan2020/wuhan2020.github.io/issues/new" target="_self">报告文档问题</a></dd><dd><a href="https://github.com/wuhan2020/wuhan2020.github.io" target="_self">在Github上编辑此文档</a></dd></dl></div><div class="col col-4"><dl><dt>项目列表</dt><dd><a href="https://wh.opensource-service.cn/" target="_self">新型冠状病毒防疫信息收集平台</a></dd><dd><a href="https://wuhan2020.kaiyuanshe.cn/" target="_self">2020援助武汉</a></dd><dd><a href="https://community.wuhan2020.org.cn/" target="_self">Wuhan2020开源社区官网</a></dd><dd><a href="http://nav.werty.cn" target="_self">COVID-19-Nav 疫情信息导航</a></dd><dd><a href="https://community.wuhan2020.org.cn/zh-cn/hackathon/index.html" target="_self">黑客松</a></dd><dd><a href="https://github.com/wuhan2020/volunteer-certificate" target="_self">wuhan2020 志愿者证书</a></dd></dl></div><div class="col col-3"><dl><dt>赞助商</dt><dd><a href="https://slack.com/" target="_blank">Slack</a></dd><dd><a href="https://shimo.im/" target="_blank">石墨文档</a></dd><dd><a href="https://www.jdcloud.com/cn/?utm_source=PMM_wuhan&amp;utm_medium=wechat&amp;utm_campaign=ReadMore&amp;utm_term=NA" target="_blank">京东智联云</a></dd><dd><a href="https://aws.amazon.com/" target="_blank">AWS 云服务</a></dd></dl></div><div class="col col-3"><dl><dt>友情链接</dt><dd><a href="https://2019ncovmemory.github.io/nCovMemory/" target="_blank">新冠肺炎记忆</a></dd></dl></div><div class="col col-3"><h3>访问统计</h3><p><span id="busuanzi_container_page_pv">本文总访问量：<span id="busuanzi_value_page_pv"></span></span></p><p><span id="busuanzi_container_site_pv">本站总访问量：<span id="busuanzi_value_site_pv"></span></span></p><p><span id="busuanzi_container_site_uv">本站总访客量：<span id="busuanzi_value_site_uv"></span></span></p></div></div><div class="copyright"><span>Copyright © 2020 Wuhan2020</span></div></div></footer></div></div>
  
    <script src="/lib/react.production.min.js"></script>
    <script src="/lib/react-dom.production.min.js"></script>
  

  <script>
    window.rootPath = '';

  </script>
  <script src="/build/blogDetail.js"></script>

  <script type="text/javascript" src="https://translate.google.cn/translate_a/element.js?cb=googleTranslateElementInit"></script>
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b6e4b6fa9a64719756faaf4e9b314bb7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();

    function googleTranslateElementInit() {
      new google.translate.TranslateElement({}, 'google_translate_element');
    }
  </script>
  
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
  <script type="text/javascript">
    const html_dom = document.getElementsByTagName('html')[0];
    
    const starTime = "April 4 2020 00:00:00 GMT+08:00";
    const endTime = "April 4 2020 23:59:59 GMT+08:00";
    const testStart = "April 3 2020 22:10:10 GMT+08:00";
    const testEnd = "April 3 2020 22:12:10 GMT+08:00";
    let intervalId = '';
    const getTimeDiff = (time) => new Date().getTime() - new Date(time).getTime();
    function getTimeOffset(start, end) {
      let result = {isStart: false, isEnd: false};
      let endOffsetMs = getTimeDiff(end);
      isEnd = endOffsetMs >= 0;
      if (end && endOffsetMs > 0) {
        return {...result, isEnd};
      }
      let startOffsetMs = getTimeDiff(start);
      let isStart = startOffsetMs >= 0;
      return {...result, isStart};
    };

    intervalId = setInterval(()=> {
      let offset = getTimeOffset(testStart, testEnd);
      if (getTimeDiff(testEnd) >= 0) {
        offset = getTimeOffset(starTime, endTime);
      }
      html_dom.classList.toggle('gray-page', offset.isStart);

      if (offset.isEnd) {
        if (intervalId && getTimeDiff(endTime) >= 0) {
          clearInterval(intervalId);
        }
        if (html_dom.classList.contains('gray-page')) {
          html_dom.classList.remove('gray-page');
        }
      }
    }, 2000);

  </script>
</body>

</html>
